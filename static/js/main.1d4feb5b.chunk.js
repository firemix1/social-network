(this["webpackJsonpway-of-samurai-2"]=this["webpackJsonpway-of-samurai-2"]||[]).push([[0],{15:function(t,e,n){t.exports={button:"button_button__2--yC",buttonLogin:"button_buttonLogin__3aVpS"}},17:function(t,e,n){t.exports={main:"Profile_main__1w87M",updatePhotoButton:"Profile_updatePhotoButton__3AKGU",profile:"Profile_profile__2t7d-",profileImg:"Profile_profileImg__1s7h5",profileInfo:"Profile_profileInfo__2r5VR",profileStatus:"Profile_profileStatus__2Fpzb",infoBar:"Profile_infoBar__nkXsa"}},26:function(t,e,n){t.exports={nav:"Navbar_nav__2IIoP",refs:"Navbar_refs__1GJnR",active:"Navbar_active__399Pk"}},27:function(t,e,n){t.exports={item:"Post_item__2M-T4",post:"Post_post__sfZrk",count:"Post_count__1rRoA",likes:"Post_likes__p7VlP",btn:"Post_btn__nQnAl"}},28:function(t,e,n){"use strict";var r=n.p+"static/media/preloader.bd4e8fac.svg",a=(n(1),n(57)),s=n.n(a),c=n(0);e.a=function(){return Object(c.jsx)("div",{className:s.a.preloader,children:Object(c.jsx)("img",{src:r,alt:"preloader"})})}},31:function(t,e,n){t.exports={header:"Header_header__3G2eZ",LoginBar:"Header_LoginBar__2weV9",login:"Header_login__1S3SI",logout:"Header_logout__hrzxZ"}},36:function(t,e,n){t.exports={spanError:"FormsControl_spanError__10UBQ",captcha:"FormsControl_captcha__g-S1k",inputElement:"FormsControl_inputElement__3PBgq"}},44:function(t,e,n){"use strict";e.a="data:image/png;base64,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"},53:function(t,e,n){"use strict";n.d(e,"d",(function(){return p})),n.d(e,"c",(function(){return h})),n.d(e,"e",(function(){return O})),n.d(e,"b",(function(){return g}));var r=n(25),a=n(3),s=n(8),c="FOLLOW",i="UNFOLLOW",o="SET_USERS",u="SET_CURRENT_PAGE",l="SET_TOTAL_USERS_COUNT",d="TOGGLE_IS_FETCHING",j="TOGGLE_IS_FOLLOWING_PROCESSING",b={users:[],pageSize:100,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},f=function(t){return{type:d,isFetching:t}},p=function(t,e){return{type:j,isFollowingInProgress:t,userId:e}},h=function(t,e){return function(n){n(f(!0)),n({type:u,currentPage:t}),s.d.getUsers(t,e).then((function(t){var e,r;n(f(!1)),n((e=t.items,{type:o,users:e})),n((r=t.totalCount,{type:l,totalUsersCount:r}))}))}},O=function(t){return function(e){e(p(!0,t)),s.d.unfollow(t).then((function(n){0===n.data.resultCode&&e(function(t){return{type:i,userId:t}}(t)),e(p(!1,t))}))}},g=function(t){return function(e){s.d.follow(t).then((function(n){0===n.data.resultCode&&e(function(t){return{type:c,userId:t}}(t)),e(p(!1,t))}))}};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c:return Object(a.a)(Object(a.a)({},t),{},{users:t.users.map((function(t){return t.id===e.userId?Object(a.a)(Object(a.a)({},t),{},{followed:!0}):t}))});case i:return Object(a.a)(Object(a.a)({},t),{},{users:t.users.map((function(t){return t.id===e.userId?Object(a.a)(Object(a.a)({},t),{},{followed:!1}):t}))});case o:return Object(a.a)(Object(a.a)({},t),{},{users:e.users});case u:return Object(a.a)(Object(a.a)({},t),{},{currentPage:e.currentPage});case l:return Object(a.a)(Object(a.a)({},t),{},{totalUsersCount:e.totalUsersCount});case d:return Object(a.a)(Object(a.a)({},t),{},{isFetching:e.isFetching});case j:return Object(a.a)(Object(a.a)({},t),{},{followingInProgress:e.isFollowingInProgress?[].concat(Object(r.a)(t.followingInProgress),[e.userId]):t.followingInProgress.filter((function(t){return t!==e.userId}))});default:return t}}},54:function(t,e,n){t.exports={dialogs:"Dialogs_dialogs__2yrRj",dialogsItems:"Dialogs_dialogsItems__2eRFk"}},55:function(t,e,n){t.exports={active:"DialogItem_active__1x9G8"}},57:function(t,e,n){t.exports={preloader:"Preloader_preloader__CFBwk"}},59:function(t,e,n){t.exports={items:"MyPost_items__1WIbY"}},61:function(t,e,n){},66:function(t,e,n){},8:function(t,e,n){"use strict";n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return o}));var r=n(58),a=n.n(r).a.create({withCredentials:!0,headers:{"API-KEY":"8e045a39-8225-45a5-872c-68b501423281"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),s={getUsers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return a.get("users?page=".concat(t,"&count=").concat(e)).then((function(t){return t.data}))},follow:function(t){return a.post("follow/"+t)},unfollow:function(t){return a.delete("follow/"+t)},getProfileInfo:function(t){return c.getProfileInfo(t)}},c={getProfileInfo:function(t){return a.get("profile/"+t)},setStatus:function(t){return a.put("profile/status",{status:t})},getStatus:function(t){return a.get("profile/status/"+t)},updatePhoto:function(t){var e=new FormData;return e.append("image",t),a.put("profile/photo/",e)}},i={setAuthMe:function(){return a.get("auth/me/")},login:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return a.post("/auth/login",{email:t,password:e,rememberMe:n,captcha:r})},logout:function(){return a.delete("/auth/login")}},o={getCaptchaUrl:function(){return a.get("security/get-captcha-url")}}},92:function(t,e,n){"use strict";n.r(e);n(61);var r=function(t){t&&t instanceof Function&&n.e(4).then(n.bind(null,95)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,s=e.getLCP,c=e.getTTFB;n(t),r(t),a(t),s(t),c(t)}))},a=n(1),s=n.n(a),c=n(32),i=n.n(c),o=n(20),u=n(21),l=n(24),d=n(23),j=(n(66),n(26)),b=n.n(j),f=n(13),p=n(0),h=function(){return Object(p.jsx)("div",{className:b.a.nav,children:Object(p.jsxs)("div",{className:b.a.refs,children:[Object(p.jsx)("div",{children:Object(p.jsx)(f.b,{to:"/profile",activeClassName:b.a.active,children:"Profile"})}),Object(p.jsx)("div",{children:Object(p.jsx)(f.b,{to:"/dialogs",activeClassName:b.a.active,children:"Messages"})}),Object(p.jsx)("div",{children:Object(p.jsx)(f.b,{to:"/users",activeClassName:b.a.active,children:"Users"})})]})})},O=n(4),g=n(25),m=n(3),x="ADD-MESSAGE",v={dialogs:[{id:1,name:"Dima"},{id:2,name:"Kolya"}],messages:[{id:1,message:"Hello"},{id:2,message:"Yey ill call u later"},{id:3,message:"Do you know da way?"}]},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case x:var n={id:4,message:e.text};return Object(m.a)(Object(m.a)({},t),{},{messages:[].concat(Object(g.a)(t.messages),[n])});default:return t}},w=n(54),y=n.n(w),P=n(55),S=n.n(P),_=function(t){return Object(p.jsx)("div",{children:Object(p.jsx)(f.b,{to:"/dialogs/".concat(t.id),activeClassName:S.a.active,children:t.dialogName})})},N=function(t){return Object(p.jsx)("div",{children:t.message})},k=n(18),C=function(t){return t&&t.length>10?"Max length is 10":void 0},I=function(t){return t?void 0:" "},U=function(t){return t?void 0:"Required"},M=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(e,n){return e||n(t)}),void 0)}},E=n(36),T=n.n(E),R=function(){return Object(p.jsx)("div",{children:B("post","text","textarea","What's new?",M(C,I))})},L=function(){return Object(p.jsx)("div",{children:B("message","text","textarea","Type your message",M(C,I))})},z=function(t){return Object(p.jsxs)("div",{className:T.a.spanError,children:[B("email","text","input","Email",M(U)),B("password","password","input","Password",M(U)),B("rememberMe","checkbox","input",null,null,"remember me"),Object(p.jsxs)("div",{className:T.a.captcha,children:[t.captchaUrl&&Object(p.jsx)("img",{src:t.captchaUrl}),t.captchaUrl&&B("captcha","text","input","Security code",M(U))]})]})},B=function(t,e,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(p.jsx)(k.a,{name:t,type:e,validate:a,children:function(t){var e=t.input,a=t.meta;return Object(p.jsxs)("div",{children:[Object(p.jsx)(n,Object(m.a)(Object(m.a)({},e),{},{placeholder:r,className:T.a.inputElement}))," ",s,a.error&&a.touched&&Object(p.jsx)("span",{children:a.error})]})}})},q=n(15),X=n.n(q),F=function(t){return Object(p.jsx)(k.b,{onSubmit:t.onSubmit,render:function(t){var e=t.handleSubmit;return Object(p.jsxs)("form",{onSubmit:e,children:[Object(p.jsx)("div",{children:Object(p.jsx)(L,{})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{type:"submit",className:X.a.button,children:"Send"})})]})}})},J=function(t){var e=t.dialogsPage.dialogs.map((function(t){return Object(p.jsx)(_,{id:t.id,dialogName:t.name},t.id)})),n=t.dialogsPage.messages.map((function(t){return Object(p.jsx)(N,{id:t.id,message:t.message},t.id)}));return Object(p.jsxs)("div",{className:y.a.dialogs,children:[Object(p.jsx)("div",{children:e}),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:n}),Object(p.jsx)("div",{children:Object(p.jsx)(F,{onSubmit:function(e){t.sendMessage(e.message)}})})]})]})},D=n(7),G=function(t){return{isAuth:t.auth.isAuth}},V=function(t){var e=function(e){return e.isAuth?Object(p.jsx)(t,Object(m.a)({},e)):Object(p.jsx)(O.a,{to:"/login"})};return e=Object(D.b)(G)(e)},W=n(10),H=Object(W.d)(V,Object(D.b)((function(t){return{dialogsPage:t.dialogsPage}}),{sendMessage:function(t){return{type:x,text:t}}}))(J),Y=n(17),K=n.n(Y),Z=n(28),Q=n(39),$=function(t){var e=Object(a.useState)(!1),n=Object(Q.a)(e,2),r=n[0],s=n[1],c=Object(a.useState)(t.status),i=Object(Q.a)(c,2),o=i[0],u=i[1];return Object(a.useEffect)((function(){u(t.status)}),[t.status]),Object(p.jsxs)("div",{children:[!r&&Object(p.jsx)("div",{children:Object(p.jsx)("span",{onClick:function(){t.owner&&s(!0)},children:t.status||"Your status"})}),r&&Object(p.jsx)("div",{children:Object(p.jsx)("input",{onChange:function(t){u(t.currentTarget.value)},autoFocus:!0,onBlur:function(){s(!1),t.setStatusMe(o)},value:o})})]})},tt=n(44),et=function(t){return t.profile?Object(p.jsxs)("div",{className:K.a.profile,children:["  ",Object(p.jsxs)("span",{className:K.a.photoUser,children:[Object(p.jsxs)("div",{className:K.a.updatePhotoButton,children:[" ",t.owner&&Object(p.jsx)("input",{type:"file",onChange:t.updatePhoto})," "]}),t.profile.photos.large?Object(p.jsx)("img",{src:t.profile.photos.large,alt:"large"}):Object(p.jsx)("img",{src:tt.a,alt:"User"})]}),Object(p.jsxs)("div",{className:K.a.infoBar,children:[" ",Object(p.jsx)("span",{className:K.a.profileInfo,children:t.profile.fullName}),Object(p.jsx)("div",{className:K.a.profileStatus,children:Object(p.jsx)($,{status:t.status,setStatusMe:t.setStatusMe,getStatus:t.getStatus,owner:t.owner})}),Object(p.jsxs)("div",{children:[" ",Object(p.jsxs)("div",{children:["About me: ",t.profile.aboutMe?t.profile.aboutMe:null]}),Object(p.jsxs)("div",{children:["Looking for a job: ",t.profile.lookingForAJob?"yes":"no"]}),Object(p.jsx)("div",{children:t.profile.lookingForAJobDescription?"Description: "+t.profile.lookingForAJobDescription:null})]})]})]}):Object(p.jsx)(Z.a,{})},nt=n(6),rt=n.n(nt),at=n(16),st=n(8),ct="ADD-POST",it="SET_USER_PROFILE",ot="SET_STATUS",ut="SET_PHOTO",lt={posts:[{id:1,message:"Hey everyone!",likesCount:1},{id:2,message:"First post",likesCount:200}],profile:null,status:""},dt=function(t){return{type:ot,status:t}},jt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ct:var n={id:3,message:e.text,likesCount:0};return Object(m.a)(Object(m.a)({},t),{},{posts:[].concat(Object(g.a)(t.posts),[n])});case it:return Object(m.a)(Object(m.a)({},t),{},{profile:e.profile});case ot:return Object(m.a)(Object(m.a)({},t),{},{status:e.status});case ut:return Object(m.a)(Object(m.a)({},t),{},{profile:Object(m.a)(Object(m.a)({},t.profile),{},{photos:e.photos})});default:return t}},bt=n(27),ft=n.n(bt),pt=function(t){return Object(p.jsxs)("div",{className:ft.a.item,children:[Object(p.jsxs)("div",{className:ft.a.post,children:[Object(p.jsx)("img",{src:"https://www.doctorlasercursos.com.br/uploads/avatars/2016/06/empty-avatar.jpg",alt:"avatar"}),t.message]}),Object(p.jsxs)("div",{className:ft.a.likes,children:[Object(p.jsx)("div",{className:ft.a.count,children:t.likesCount}),Object(p.jsx)("button",{className:ft.a.btn+" "+X.a.button,children:"Like it"})]})]})},ht=n(59),Ot=n.n(ht),gt=function(t){return Object(p.jsx)(k.b,{onSubmit:t.onSubmit,render:function(t){var e=t.handleSubmit;return Object(p.jsxs)("form",{onSubmit:e,children:[Object(p.jsx)("div",{children:Object(p.jsx)(R,{})}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{type:"submit",className:X.a.button,children:"Post"})})]})}})},mt=function(t){var e=t.posts.map((function(t){return Object(p.jsx)(pt,{id:t.id,message:t.message,likesCount:t.likesCount},t.id)}));return Object(p.jsxs)("div",{className:Ot.a.items,children:[Object(p.jsx)("h3",{children:"My posts"}),Object(p.jsx)("div",{children:Object(p.jsx)(gt,{onSubmit:function(e){t.addPost(e.post)}})}),e]})},xt=Object(D.b)((function(t){return{posts:t.profilePage.posts,newPostText:t.profilePage.newPostText}}),{addPost:function(t){return{type:ct,text:t}}})(mt),vt=function(t){return Object(p.jsxs)("div",{className:K.a.main,children:[Object(p.jsx)(et,{profile:t.profile,status:t.status,setStatusMe:t.setStatusMe,getStatus:t.getStatus,owner:t.owner,updatePhoto:t.updatePhoto}),Object(p.jsx)(xt,{})]})},At=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))).updatePhoto=function(e){e.target.files.length&&t.props.setPhoto(e.target.files[0])},t}return Object(u.a)(n,[{key:"loadProfile",value:function(){var t=this.props.match.params.userId;t||(t=this.props.authorizedId)||this.props.history.push("/login"),this.props.setProfileInfo(t),this.props.getStatus(t)}},{key:"componentDidMount",value:function(){this.loadProfile()}},{key:"componentDidUpdate",value:function(t,e){t.match.params.userId!==this.props.match.params.userId&&this.loadProfile()}},{key:"render",value:function(){return Object(p.jsx)(vt,Object(m.a)(Object(m.a)({},this.props),{},{profile:this.props.profile,status:this.props.status,setStatusMe:this.props.setStatusMe,owner:!this.props.match.params.userId,updatePhoto:this.updatePhoto}))}}]),n}(s.a.Component),wt=Object(W.d)(Object(D.b)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedId:t.auth.id}}),{setProfileInfo:function(t){return function(){var e=Object(at.a)(rt.a.mark((function e(n){var r;return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st.d.getProfileInfo(t);case 2:r=e.sent,n((a=r.data,{type:it,profile:a}));case 4:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()},setStatusMe:function(t){return function(){var e=Object(at.a)(rt.a.mark((function e(n){return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st.b.setStatus(t);case 2:0===e.sent.data.resultCode&&n(dt(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getStatus:function(t){return function(){var e=Object(at.a)(rt.a.mark((function e(n){var r;return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st.b.getStatus(t);case 2:r=e.sent,n(dt(r.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setPhoto:function(t){return function(){var e=Object(at.a)(rt.a.mark((function e(n){var r;return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st.b.updatePhoto(t);case 2:0===(r=e.sent).data.resultCode&&n((a=r.data.data.photos,{type:ut,photos:a}));case 4:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()}}),O.f,V)(At),yt=n(31),Pt=n.n(yt),St=n.p+"static/media/React-icon.cf677e64.png",_t=function(t){return Object(p.jsxs)("div",{className:Pt.a.header,children:[Object(p.jsx)("img",{src:St,alt:"header img"}),Object(p.jsx)("div",{className:Pt.a.LoginBar,children:t.auth.isAuth?Object(p.jsxs)("div",{className:Pt.a.logout,children:[Object(p.jsxs)(f.b,{to:"/profile",children:[" ",t.auth.login]})," ",Object(p.jsx)("br",{}),Object(p.jsx)("button",{onClick:t.logout,className:X.a.buttonLogin,children:"Logout"})]}):Object(p.jsx)("div",{className:Pt.a.login,children:Object(p.jsx)(f.b,{to:"/login",children:"Login"})})})]})},Nt=n(35),kt=n(19),Ct="SET_AUTH_USER",It="SET_CAPTCHA",Ut={id:null,email:null,login:null,isAuth:!1,captchaUrl:null},Mt=function(t,e,n,r){return{type:Ct,data:{id:t,email:e,login:n,isAuth:r}}},Et=function(){return function(){var t=Object(at.a)(rt.a.mark((function t(e){var n,r,a,s,c;return rt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.a.setAuthMe();case 2:0===(n=t.sent).data.resultCode&&(r=n.data.data,a=r.id,s=r.login,c=r.email,e(Mt(a,c,s,!0)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Ct:return Object(m.a)(Object(m.a)({},t),e.data);case It:return Object(m.a)(Object(m.a)({},t),{},{captchaUrl:e.captchaUrl});default:return t}},Rt=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(p.jsx)(_t,Object(m.a)({},this.props))}}]),n}(s.a.Component),Lt=Object(D.b)((function(t){return{auth:t.auth}}),{logout:function(){return function(){var t=Object(at.a)(rt.a.mark((function t(e){return rt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.a.logout();case 2:0===t.sent.data.resultCode&&e(Mt(null,null,null,!1));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(Rt),zt=function(t){return Object(p.jsx)(k.b,{onSubmit:t.onSubmit,render:function(e){var n=e.handleSubmit;e.submitError;return Object(p.jsxs)("form",{onSubmit:n,children:[Object(p.jsx)(z,{captchaUrl:t.captchaUrl}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{className:X.a.button,type:"submit",children:"Login"})})]})}})},Bt=Object(D.b)((function(t){return{isAuth:t.auth.isAuth,captchaUrl:t.auth.captchaUrl}}),{login:function(t,e,n,r){return function(){var a=Object(at.a)(rt.a.mark((function a(s){var c;return rt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,st.a.login(t,e,n,r);case 2:if(0!==(c=a.sent).data.resultCode){a.next=7;break}s(Et()),a.next=12;break;case 7:if(10!==c.data.resultCode){a.next=11;break}s(function(){var t=Object(at.a)(rt.a.mark((function t(e){var n,r;return rt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.c.getCaptchaUrl();case 2:n=t.sent,r=n.data.url,e({type:It,captchaUrl:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a.next=12;break;case 11:return a.abrupt("return",Object(Nt.a)({},kt.a,"login failed"));case 12:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()}})((function(t){return t.isAuth?Object(p.jsx)(O.a,{to:"/profile"}):Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Login"}),Object(p.jsx)(zt,{onSubmit:function(e){t.login(e.email,e.password,e.rememberMe,e.captcha)},captchaUrl:t.captchaUrl})]})})),qt="INITIALIZE_COMPLETED",Xt={initialized:!1},Ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case qt:return Object(m.a)(Object(m.a)({},t),{},{initialized:!0});default:return t}},Jt=s.a.lazy((function(){return n.e(3).then(n.bind(null,96))})),Dt=function(t){Object(l.a)(n,t);var e=Object(d.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeFull()}},{key:"render",value:function(){return this.props.initialized?Object(p.jsx)("div",{className:"full-screen",children:Object(p.jsxs)("div",{className:"app-wrapper",children:[Object(p.jsx)(Lt,{}),Object(p.jsx)(h,{}),Object(p.jsxs)("div",{className:"app-wrapper-content",children:[Object(p.jsx)(O.b,{path:"/profile/:userId?",render:function(){return Object(p.jsx)(wt,{})}}),Object(p.jsx)(O.b,{path:"/dialogs",render:function(){return Object(p.jsx)(H,{})}}),Object(p.jsx)(s.a.Suspense,{fallback:Object(p.jsxs)("div",{children:[" ",Object(p.jsx)(Z.a,{})," "]}),children:Object(p.jsx)(O.b,{path:"/users",render:function(){return Object(p.jsx)(Jt,{})}})}),Object(p.jsx)(O.b,{path:"/login",render:function(){return Object(p.jsx)(Bt,{})}}),Object(p.jsx)(O.b,{exact:!0,path:"/",render:function(){return Object(p.jsx)(Bt,{})},children:Object(p.jsx)(O.a,{from:"/",to:"/profile"})})]})]})}):Object(p.jsx)(Z.a,{})}}]),n}(a.Component),Gt=Object(W.d)(O.f,Object(D.b)((function(t){return{initialized:t.app.initialized}}),{initializeFull:function(){return function(t){var e=t(Et());Promise.all([e]).then((function(){t({type:qt})}))}}}))(Dt),Vt=n(53),Wt=n(60),Ht=Object(W.c)({profilePage:jt,dialogsPage:A,usersPage:Vt.a,auth:Tt,app:Ft}),Yt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||W.d,Kt=Object(W.e)(Ht,Yt(Object(W.a)(Wt.a)));window.store=Kt;var Zt=Kt;i.a.render(Object(p.jsx)(f.a,{children:Object(p.jsx)(D.a,{store:Zt,children:Object(p.jsx)(Gt,{})})}),document.getElementById("root")),r()}},[[92,1,2]]]);
//# sourceMappingURL=main.1d4feb5b.chunk.js.map